<html>
  <head>
    <title>Stacked Column Chart: D3 Experiments</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
      }

      button {
        display: block;
        margin: 0 auto;
      }

      #wrapper {
        width: 100%;
        max-width: 1300px;
        height: 500px;
        border-radius: 4px;
        margin: 30px auto;
        background: #FCFCFC;
        border: 1px solid #eee;
      }

      #wrapper > svg {
        width: 100%;
        height: 100%;
        shape-rendering: crispEdges;
      }

      .column-segment {
        cursor: pointer;
      }

      .tooltip {
        transition: opacity 200ms ease;
        display: inline-block;
        background: #000;
        padding: 10px;
        border-radius: 3px;
        color: #FFF;
        z-index: 99;
        /*transform: translate(-50%, -35px);*/
      }

      .tooltip:after {
        content: "";
        width: 0;
      	height: 0;
      	border-left: 5px solid transparent;
      	border-right: 5px solid transparent;
    	  border-top: 5px solid black;
        position: absolute;
        bottom: -5px;
        left: 50%;
        margin-left: -5px;
      }

      .axis path,
      .axis line {
        fill: none;
        stroke: grey;
      }

      .axis text,
      .column text,
      .labels text {
        fill: grey;
        font-family: sans-serif;
        font-size: 11px;
      }

      .tooltip text {
        fill: #FFF;
      }
    </style>
  </head>
  <body>

    <button id="add_data">Add September!</button>
    <div id="wrapper"></div>

    <script src="d3/d3.js" charset="utf-8"></script>
    <script src="js/stacked_column.js"></script>
    <script>
      (function(){
        var data = [
          {
            segments: [
              {label: 'Sales', value: 20000},
              {label: 'Product', value: 13000},
              {label: 'Ops', value: 5006},
            ],
            label: 'February'
          },
          {
            segments: [
              {label: 'Sales', value: 20000},
              {label: 'Product', value: 10000},
              {label: 'Ops', value: 5000},
            ],
            label: 'March'
          },
          {
            segments: [
              { label: 'Sales', value: 30000 },
              { label: 'Product', value: 11000 },
              { label: 'Ops', value: 7000 },
            ],
            label: 'April'
          },
          {
            segments: [
              { label: 'Sales', value: 21300 },
              { label: 'Product', value: 8000 },
              { label: 'Ops', value: 8300 },
            ],
            label: 'May'
          },
          {
            segments: [
              { label: 'Sales', value: 4000 },
              { label: 'Product', value: 29300 },
              { label: 'Ops', value: 12000 },
            ],
            label: 'June'
          },
          {
            segments: [
              { label: 'Sales', value: 21400 },
              { label: 'Product', value: 9600 },
              { label: 'Ops', value: 7400 },
            ],
            label: 'July'
          },
          {
            segments: [
              { label: 'Sales', value: 41000 },
              { label: 'Product', value: 3000 },
              { label: 'Ops', value: 2500 },
            ],
            label: 'August'
          }
        ];

        // initiate a new column chart instance
        var chart = new StackedColumnChart("wrapper");
        chart.init(data);

        /**
         * Add a new data point to the chart
         * via the public addData() method
         */
        var button = document.getElementById('add_data');
        button.addEventListener("click", function(e){
          e.preventDefault();
          var newData = {
            segments: [
              { label: 'Sales', value: 20000 },
              { label: 'Product', value: 10000 },
              { label: 'Ops', value: 5000 },
            ],
            label: 'September'
          }
          chart.addData(newData);
        });
      })();
    </script>

  </body>
</html>
